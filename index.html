<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Simple Calculator</title>
  <style>
    :root{
      --bg:#eadcff;            /* soft purple like your screenshot */
      --panel:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --btn:#eef2f7;           /* pill button base */
      --btn-text:#111827;
      --accent:#d68cab;        /* pinkish accent for = */
      --shadow-dark:rgba(0,0,0,.15);
      --shadow-light:rgba(255,255,255,.9);
      --radius:24px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; display:grid; place-items:center; background:var(--bg);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
      color:var(--text);
      padding:24px;
    }

    /* phone-like container */
    .shell{
      width:360px; max-width:92vw; background:var(--panel); border-radius:28px; padding:22px 20px 26px;
      box-shadow: 0 24px 40px rgba(31,41,55,.15), inset 0 1px 0 var(--shadow-light);
    }

    /* display */
    .display{
      height:72px; border-radius:22px; margin-bottom:18px; padding:14px 18px; overflow:hidden;
      background:#eef7f6; color:var(--text);
      box-shadow: inset 6px 6px 12px var(--shadow-dark), inset -6px -6px 12px var(--shadow-light);
      display:flex; align-items:center; justify-content:flex-end; font-size:40px; line-height:1; font-weight:600;
    }
    .display.small{font-size:28px}

    /* grid of buttons */
    .grid{
      display:grid; grid-template-columns:repeat(4,1fr); gap:14px;
    }

    button.key{
      -webkit-tap-highlight-color: transparent;
      height:56px; border:none; border-radius:999px; cursor:pointer; font-size:16px; font-weight:600; color:var(--btn-text);
      background:var(--btn);
      box-shadow: 6px 6px 12px var(--shadow-dark), -6px -6px 12px var(--shadow-light);
      transition: transform .06s ease, box-shadow .12s ease, opacity .15s;
    }
    button.key:active{ transform: translateY(1px); box-shadow: inset 6px 6px 12px var(--shadow-dark), inset -6px -6px 12px var(--shadow-light); }

    .op{color:#334155}
    .equal{
      grid-column: span 2; background: var(--accent); color:#fff; box-shadow: 6px 6px 12px rgba(0,0,0,.18), -6px -6px 12px rgba(255,255,255,.85);
    }

    .footer{margin-top:14px; text-align:center; font-size:12px; color:var(--muted)}
  </style>
</head>
<body>
  <div class="shell" role="application" aria-label="Simple Calculator">
    <div id="screen" class="display" aria-live="polite">0</div>

    <div class="grid" id="keys">
      <button class="key op" data-key="CLR">clr</button>
      <button class="key op" data-key="DEL">DEL</button>
      <button class="key op" data-key="%">%</button>
      <button class="key op" data-key="/">/</button>

      <button class="key" data-key="7">7</button>
      <button class="key" data-key="8">8</button>
      <button class="key" data-key="9">9</button>
      <button class="key op" data-key="*">*</button>

      <button class="key" data-key="4">4</button>
      <button class="key" data-key="5">5</button>
      <button class="key" data-key="6">6</button>
      <button class="key op" data-key="-">-</button>

      <button class="key" data-key="1">1</button>
      <button class="key" data-key="2">2</button>
      <button class="key" data-key="3">3</button>
      <button class="key op" data-key="+">+</button>

      <button class="key" data-key=".">.</button>
      <button class="key" data-key="0">0</button>
      <button class="key equal" data-key="=">=</button>
    </div>

    <div class="footer">Single-file app • works offline • drop this as <b>index.html</b> into any folder or GitHub Pages.</div>
  </div>

  <script>
    const screen = document.getElementById('screen');
    let expr = '0';

    function update(){
      screen.textContent = expr || '0';
      // shrink font if long
      screen.classList.toggle('small', screen.textContent.length > 11);
    }

    function append(token){
      if(expr === '0' && /[0-9.]/.test(token)) expr = '';
      expr += token;
      tidy();
      update();
    }

    function tidy(){
      // prevent multiple operators in a row (except minus for negative numbers)
      expr = expr.replace(/([+*/%\.])\1+/g, '$1');
      expr = expr.replace(/\.(?=.*\.)/g, '.');
    }

    function del(){ expr = expr.length > 1 ? expr.slice(0,-1) : '0'; update(); }
    function clr(){ expr = '0'; update(); }

    function percent(){
      // Apply % to the last number: turns 50% into (50/100)
      const m = expr.match(/(\d+(?:\.\d+)?)$/);
      if(!m) return;
      const n = m[1];
      expr = expr.slice(0, -n.length) + `(${n}/100)`;
      update();
    }

    function calculate(){
      try{
        const safe = expr
          .replace(/×/g,'*').replace(/÷/g,'/')
          .replace(/[^0-9+\-*/(). ]/g, ''); // keep only allowed chars
        if(!safe) return;
        const result = Function(`"use strict"; return (${safe})`)();
        expr = (result === Infinity || Number.isNaN(result)) ? 'Error' : String(result);
      }catch{ expr = 'Error'; }
      update();
    }

    // Button clicks
    document.getElementById('keys').addEventListener('click', (e)=>{
      const k = e.target.dataset.key; if(!k) return;
      if(k === 'CLR') return clr();
      if(k === 'DEL') return del();
      if(k === '%')   return percent();
      if(k === '=')   return calculate();
      append(k);
    });

    // Keyboard support
    const allowed = new Set(['0','1','2','3','4','5','6','7','8','9','.','+','-','*','/','(',')']);
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === '='){ e.preventDefault(); calculate(); return; }
      if(e.key === 'Backspace'){ del(); return; }
      if(e.key.toLowerCase() === 'c'){ if(e.ctrlKey) return; clr(); return; }
      if(e.key === '%'){ percent(); return; }
      if(allowed.has(e.key)){ append(e.key); }
    });

    update();
  </script>
</body>
</html>
